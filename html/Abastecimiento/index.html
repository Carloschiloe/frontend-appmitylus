<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Abastecimiento de MMPP - Gestión de Proveedores</title>
  <!-- Materialize CSS + Iconos + Tu CSS -->
  <link href="https://fonts.googleapis.com/icon?family=Material+Icons" rel="stylesheet"/>
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/materialize/1.0.0/css/materialize.min.css"/>
  <link rel="stylesheet" href="/css/abastecimiento.css" />
</head>
<body>
  <!-- NAV -->
  <nav class="teal darken-2">
    <div class="nav-wrapper">
      <a href="/index.html" class="btn-flat left" title="Volver">
        <i class="material-icons">arrow_back</i>
      </a>
      <a href="#" class="brand-logo center">Abastecimiento de Materias Primas</a>
    </div>
  </nav>

  <div class="container" style="margin-top:1.3rem;">
    <!-- Pestañas -->
    <ul id="tabs-abastecimiento" class="tabs">
      <li class="tab col s4"><a class="active" href="#tab-contactos">Contactos</a></li>
      <!-- Futuras pestañas -->
      <li class="tab col s4"><a href="#tab-agenda">Agenda</a></li>
      <li class="tab col s4"><a href="#tab-gestion">Gestión</a></li>
    </ul>

    <!-- TAB: Contactos -->
    <section id="tab-contactos" class="col s12" style="display: none;">
  <h5>Contactar Proveedor</h5>
  <!-- Buscador de proveedor -->
  <div class="input-field">
    <input type="text" id="buscarProveedor" placeholder="Nombre o apellido del proveedor..." autocomplete="off">
    <label for="buscarProveedor">Proveedor</label>
    <div id="proveedorSugerencias" class="autocomplete-suggestions"></div>
  </div>

  <!-- Lista de centros del proveedor seleccionado -->
  <div id="centrosProveedor" style="margin-top: 1rem;"></div>

  <!-- Formulario de contacto (se rellena al seleccionar un centro) -->
  <form id="formContacto" style="margin-top: 2rem; display: none;">
    <h6>Registrar contacto</h6>
    <div class="row">
      <div class="input-field col s4">
        <input type="text" id="contactoCodigoCentro" readonly>
        <label for="contactoCodigoCentro">Código Centro</label>
      </div>
      <div class="input-field col s4">
        <input type="text" id="contactoComunaCentro" readonly>
        <label for="contactoComunaCentro">Comuna</label>
      </div>
      <div class="input-field col s4">
        <input type="number" id="contactoHectareasCentro" readonly>
        <label for="contactoHectareasCentro">Hectáreas</label>
      </div>
    </div>
    <div class="input-field">
      <textarea id="contactoComentario" class="materialize-textarea"></textarea>
      <label for="contactoComentario">Comentario</label>
    </div>
    <button class="btn teal" type="submit">Registrar contacto</button>
  </form>
</section>


  <!-- Materialize JS y tus scripts -->
  <script src="https://cdnjs.cloudflare.com/ajax/libs/materialize/1.0.0/js/materialize.min.js"></script>
  <!-- Modular: Contactos -->
  <script type="module">
    import { initContactosTab } from '/js/abastecimiento/contactos/contactos.js';

    document.addEventListener('DOMContentLoaded', function () {
      // Inicia pestañas Materialize
      const elTabs = document.querySelectorAll('.tabs');
      M.Tabs.init(elTabs);

      // Carga la vista de contactos al cargar la página
      initContactosTab();

      // También la puedes recargar si vuelves a la pestaña:
      document.querySelector('a[href="#tab-contactos"]').addEventListener('click', initContactosTab);
    });
  </script>
</body>
</html>

