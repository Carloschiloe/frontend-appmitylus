/* ==============================
   CENTROS – Overrides global
   ============================== */

/* Fallbacks */
:root{ --primary:#00695c; --primary-acc:#009688; }

/* ---------- TABLA PRINCIPAL ---------- */
#centrosTable.dataTable thead th{ background:var(--primary) !important; color:#fff !important; }
#centrosTable, #centrosTable th, #centrosTable td{ font-size:.92em !important; padding:.26em .48em !important; }

/* Col 1: Proveedor */
#centrosTable th:first-child, #centrosTable td:first-child{
  white-space: normal !important; word-break: break-word !important;
  max-width:420px !important; min-width:100px !important;
}
/* Col 2: Comuna */
#centrosTable th:nth-child(2), #centrosTable td:nth-child(2){ text-transform:capitalize !important; }

/* Acciones */
#centrosTable td:last-child{ white-space:nowrap !important; text-align:left; }
#centrosTable td .material-icons, .child-row-lineas td .material-icons{ font-size:1.1em; margin-right:6px; }
#centrosTable td .material-icons:hover, .child-row-lineas td .material-icons:hover{
  color:var(--primary-acc); transform:translateY(-1px);
}

/* ---------- CHILD-ROW: LÍNEAS ---------- */
.child-row-lineas{
  width:100% !important; padding:14px 12px 10px 20px !important;
  background:#f7faf9; border-bottom:2px solid #b2dfdb; box-shadow:0 2px 14px rgba(0,150,136,.1);
  border-radius:0 0 16px 16px;
}
.child-table-lineas{ width:100% !important; background:transparent !important; border-collapse:collapse !important; table-layout:auto !important; }
.child-table-lineas th{
  background:#e0f2f1 !important; color:#004d40 !important; font-weight:700 !important;
  padding:.18rem .13rem !important; border-bottom:1px solid #b2dfdb !important; text-align:center; white-space:nowrap !important;
}
.child-table-lineas th, .child-table-lineas td{
  padding:.15rem .1rem !important; font-size:.94em !important; border-bottom:1px solid #eee;
  text-align:center; white-space:nowrap !important;
}
.child-table-lineas input, .child-table-lineas select{
  width:92%; font-size:.93em; padding:2px 4px; margin:0; border:1px solid #bdbdbd; border-radius:3px;
}

/* =========================
   MAPA (full-bleed + shell)
   ========================= */
.full-bleed-shell{ width:100vw; position:relative; left:50%; right:50%; margin-left:-50vw; margin-right:-50vw; padding:0 0 24px; }
.map-title{ margin:.6rem 0 .2rem; }

#tab-mapa{ padding:.4rem 0 0; }

/* Shell con altura REAL */
#mapShell{
  position:relative; border:1px solid #ddd; border-radius:7px; background:#d8d8d8; overflow:hidden;
  height:calc(100vh - 160px);    /* ajusta 160px según tu header/tabs */
  min-height:520px;
}

/* Canvas llena el shell */
#map, #map.leaflet-container{
  width:100% !important; height:100% !important; min-height:inherit; background:#d8d8d8;
}
#map:focus-visible{ outline:2px solid #26a69a; outline-offset:2px; }

/* Fullscreen */
:fullscreen #mapShell, #mapShell:fullscreen{ width:100vw; height:100vh; margin:0; padding:0; border-radius:0; }
:fullscreen #map, #map:fullscreen{ width:100vw; height:100vh; margin:0; padding:0; }
body:has(#mapShell:fullscreen){ overflow:hidden; }

/* ---------- Buscador flotante ---------- */
.map-search{
  position:absolute; top:12px; left:50%; transform:translateX(-50%);
  width:min(720px,92vw); z-index:1001; display:flex; gap:6px; flex-direction:column;
}
.map-search input[type="search"]{
  width:100%; height:44px; border-radius:10px; border:1px solid #e5e7eb; background:#fff; padding:0 14px; font-size:15px;
  box-shadow:0 6px 18px rgba(0,0,0,.08);
}
.map-search input[type="search"]:focus{ outline:none; border-color:#26a69a; box-shadow:0 0 0 3px rgba(38,166,154,.15); }
.map-search-results{
  list-style:none; margin:0; padding:6px 0; background:#fff; border:1px solid #e5e7eb; border-radius:10px;
  box-shadow:0 10px 24px rgba(0,0,0,.10); max-height:52vh; overflow-y:auto; display:none;
}
.map-search-results.show{ display:block; }
.map-search-results li{ padding:8px 12px; cursor:pointer; line-height:1.25; border-bottom:1px solid #f3f4f6; }
.map-search-results li:last-child{ border-bottom:none; }
.map-search-results li:hover{ background:#f9fafb; }

/* ---------- Sidebar ---------- */
.sidebar-centros{
  position:absolute; top:82px; left:28px; width:260px; background:#fff; box-shadow:0 2px 12px rgba(0,0,0,.14);
  border-radius:10px; z-index:900; padding:12px 12px 8px; transition:transform .28s ease, opacity .28s ease;
}
.sidebar-centros.minimized{ transform:translateX(-230px); opacity:.85; }
.toggle-btn{
  position:absolute; right:-16px; top:10px; width:32px; height:32px; border-radius:50%; background:#fff; box-shadow:0 2px 8px rgba(0,0,0,.18);
  display:grid; place-items:center; border:none; cursor:pointer;
}
.sidebar-list{ margin:0; padding:0; list-style:none; max-height:250px; overflow-y:auto; }
.sidebar-list li{ cursor:pointer; padding:7px 0; border-bottom:1px solid #eee; font-size:15px; }
.sidebar-list li.selected{ background:#e0f2f1; font-weight:700; }

/* ---------- Etiquetas en polígonos ---------- */
.leaflet-tooltip.centro-label{
  background:rgba(255,255,255,.88); border:1px solid #e5e7eb; border-radius:8px; padding:4px 8px; box-shadow:0 2px 10px rgba(0,0,0,.08);
  pointer-events:none;
}
.centro-label .leaflet-tooltip-content{ margin:0; }
.centro-label .centro-label-inner{ text-align:center; line-height:1.2; }
.centro-label .titular{ font-weight:800; color:#111827; font-size:12px; }
.centro-label .codigo{ font-weight:600; color:#374151; font-size:11px; }

/* ---------- Responsive ---------- */
@media (max-width:1000px){ #mapShell{ height:calc(100vh - 170px); } }
@media (max-width:900px){  #centrosTable, #centrosTable_wrapper{ display:block !important; min-width:360px !important; }
                           .dataTables_paginate{ justify-content:center; }
                           #mapShell{ height:calc(100vh - 190px); min-height:420px; } }
@media (max-width:700px){  .sidebar-centros{ top:86px; left:12px; width:92vw; }
                           .sidebar-centros.minimized{ transform:translateX(-90vw); }
                           .map-search{ width:94vw; } }
@media (max-width:600px){  #mapShell{ height:calc(100vh - 200px); min-height:360px; } }
