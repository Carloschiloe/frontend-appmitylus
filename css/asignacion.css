/* ==============================
   ASIGNACIÓN – Estilo alineado a GLOBAL
   Scoped bajo .asig
============================== */

:root{
  /* colores globales ya usados en tu proyecto */
  --ok:#2e7d32;
  --muted:#6b7280;
  --bar-req:#cfd8dc;
  --bar-asg:#80cbc4;
  --bar-proc:#66bb6a;
  --bar-bg:#eef3f2;
  --ring:0 0 0 3px rgba(0,150,136,.15);

  /* mock (marco verde + barras) */
  --mock-border:#57b13f;
  --mock-real:#66bb6a;
  --mock-real-bg:#e9f2e9;
  --mock-asg:#7ec8e7;
}

/* ===== Toolbar ===== */
.asig .toolbar{display:flex;align-items:center;justify-content:space-between;margin-bottom:12px}
.asig .toolbar .left{display:flex;gap:10px;align-items:center}
.asig select,.asig button,.asig input[type=number],.asig input[type=text]{background:#fff;color:var(--txt);border:1px solid var(--border);border-radius:10px;padding:8px 10px}
.asig button{background:var(--primary);color:#fff;border:none}
.asig button:hover{background:#013e34;box-shadow:var(--shadow)}

/* ===== Leyenda ===== */
.asig .legend{display:flex;gap:14px;align-items:center;color:var(--txt-soft)}
.asig .bullet{width:12px;height:12px;border-radius:3px;display:inline-block}
.asig .b-req{background:var(--bar-req)} .asig .b-asg{background:var(--bar-asg)} .asig .b-proc{background:var(--bar-proc)}

/* ===== Grid ===== */
.asig .grid{display:grid;grid-template-columns:repeat(6,minmax(170px,1fr));gap:12px}
@media (max-width:1100px){.asig .grid{grid-template-columns:repeat(4,1fr)}}
@media (max-width:780px){.asig .grid{grid-template-columns:repeat(2,1fr)}}

/* ===== Card base ===== */
.asig .card{background:transparent;border:none;border-radius:0;box-shadow:none;padding:0;cursor:pointer;position:relative}
.asig .card.lock{opacity:.45;pointer-events:none}

/* ======== TARJETA TIPO MOCK ======== */
/* Marco exterior redondeado */
.asig .card--month{
  padding:16px;border:4px solid var(--mock-border);border-radius:32px;background:transparent;
}

/* Pastilla con MES */
.asig .card--month .head{margin:0 8px 12px}
.asig .card--month .month{
  border:4px solid var(--mock-border);border-radius:20px;background:#fff;color:#0f1e1d;
  font-weight:800;text-align:center;padding:10px 12px;letter-spacing:.6px;font-size:1.05rem;
}

/* Panel interior */
.asig .card--month .pane{
  border:4px solid var(--mock-border);border-radius:22px;background:#fff;padding:14px 14px 12px;margin:0 2px;
}

/* Título + número grande */
.asig .card--month .tons-title{ text-align:center;font-weight:800;font-size:1.1rem;letter-spacing:.5px;color:#111 }
.asig .card--month .tons-value{ text-align:center;font-weight:900;font-size:2.4rem;line-height:1;margin:6px 0 8px;color:#111 }

/* Filas de barras */
.asig .rowbar{ display:grid;grid-template-columns:84px 1fr 48px;align-items:center;gap:10px;margin:8px 0 12px }
.asig .rowbar .lbl{ color:#5c6b72;font-weight:700;font-size:.92rem }
.asig .rowbar .pct{ text-align:right;font-weight:800;color:#0f1e1d }

/* Barra + numeritos sobre la barra */
.asig .barwrap{
  position:relative;height:12px;border-radius:8px;background:var(--mock-real-bg);
  border:1px solid #d9e8d9;overflow:hidden;
}
.asig .barwrap .fill-real{ position:absolute;left:0;top:0;bottom:0;width:0;background:var(--mock-real) }
.asig .barwrap .fill-asg { position:absolute;left:0;top:0;bottom:0;width:0;background:var(--mock-asg) }
.asig .n-left,.asig .n-right{ position:absolute;top:-14px;font-size:.78rem;color:#616e74;font-weight:700 }
.asig .n-left{left:4px}.asig .n-right{right:4px}

/* ===== Panel Chart ===== */
.asig .panel-chart{margin-top:18px;padding:12px;border:1px solid var(--border);border-radius:16px;background:var(--bg-soft);box-shadow:var(--shadow)}
.asig .panel-chart h3{margin:6px 6px 10px;font-size:1rem;color:var(--primary)}

/* ===== Drawer (proveedores) ===== */
.drawer{position:fixed;top:84px;right:16px;width:420px;max-width:92vw;background:#fff;border:1px solid var(--border);border-radius:16px;box-shadow:var(--shadow);display:none;z-index:10400}
.drawer header{display:flex;justify-content:space-between;align-items:center;padding:12px 14px;border-bottom:1px solid var(--border);font-weight:700;color:var(--primary)}
.drawer .x{background:#fff;border:1px solid var(--border);border-radius:8px;padding:2px 8px;cursor:pointer}
.drawer .x:hover{filter:brightness(.96)}
.drawer .body{max-height:58vh;overflow:auto;padding:10px 14px}
.drawer table{width:100%;border-collapse:collapse}
.drawer th,.drawer td{padding:8px;border-bottom:1px solid #eef1f3;text-align:left}
.drawer th{color:#0f1e1d;font-size:.86rem;font-weight:800;background:#f7faf9}

/* ===== Modales ===== */
.asig-mask{position:fixed;inset:0;background:rgba(0,0,0,.45);display:none;z-index:10500}
.asig-modal{position:fixed;left:0;right:0;top:6vh;margin:0 auto;width:92%;max-width:760px;max-height:88vh;background:#fff;border:1px solid var(--border);border-radius:16px;box-shadow:0 18px 60px rgba(0,0,0,.25);display:none;z-index:10600;overflow:hidden}
.asig-modal--sm{max-width:560px}
.asig-modal header{padding:12px 16px;font-weight:700;border-bottom:1px solid var(--border);color:var(--primary)}
.asig-modal .content{padding:14px 16px;max-height:calc(88vh - 120px);overflow:auto}
.asig-modal .actions{display:flex;gap:10px;justify-content:flex-end;padding:10px 16px;border-top:1px solid var(--border);background:#fff;position:sticky;bottom:0}

/* ===== FAB ===== */
.fab{position:fixed;right:22px;bottom:22px;background:var(--primary);color:#fff;border:0;border-radius:999px;padding:12px 14px;font-weight:700;box-shadow:var(--shadow);cursor:pointer;z-index:10300}
.fab:hover{background:#013e34}

/* ===== Responsive ===== */
@media (max-width:900px){
  .asig .grid{grid-template-columns:repeat(3,1fr);gap:10px}
  .drawer{top:72px;right:12px;width:380px}
}
@media (max-width:640px){
  .asig .grid{grid-template-columns:repeat(2,1fr);gap:10px}
  .asig .card--month{padding:12px;border-radius:26px}
  .asig .card--month .month{padding:8px 10px;font-size:1rem}
  .asig .card--month .pane{padding:12px;border-radius:18px}
  .asig .card--month .tons-value{font-size:2rem}
  .asig .rowbar{grid-template-columns:74px 1fr 44px;gap:8px;margin:6px 0 10px}
  .asig .barwrap{height:10px}
  .drawer{right:10px;width:92vw;top:auto;bottom:86px;max-height:58vh;border-radius:14px}
  .drawer .body{max-height:calc(58vh - 58px)}
  .drawer th,.drawer td{padding:7px}
  .fab{right:16px;bottom:16px;padding:14px 16px;font-size:.95rem}
}
@media (max-width:420px){
  .asig .grid{grid-template-columns:1fr;gap:10px}
  .drawer{bottom:78px}
}

/* ====== FIX ancho completo para la vista Asignación ====== */
.asig .wrap{ width:100%; max-width:none; margin:0; padding:0 12px; }
.asig #cards{ width:100% !important; display:block; }
.asig .quarters{ width:100% !important; display:block; }
.asig .quarter{ width:100% !important; display:block; }

/* el grid debe usar todo el ancho disponible */
.asig .grid{
  width:100% !important;
  grid-template-columns:repeat(6, minmax(200px, 1fr)); /* ajusta si quieres más ancho mínimo */
  justify-items:stretch;
}

/* por si algún estilo global puso max-width al main/container */
main, .container{ max-width:none !important; }
