/* ==============================
   ASIGNACIÓN – Estilo compacto
   (scope .asig)
============================== */

:root{
  /* Colores base */
  --ok:#2e7d32;
  --danger:#ef5350;
  --muted:#6b7280;
  --muted-pill:#9aa3af;

  --bar-req:#cfd8dc;
  --bar-asg:#7ec8e7;
  --bar-proc:#66bb6a;
  --bar-bg:#eef3f2;

  /* Tarjetas */
  --mock-border:#4caf50;

  /* UI base (hereda de tu styles.css) */
  --txt:#0f1e1d;
  --txt-soft:#6b7280;
  --bg-soft:#f7faf9;
  --border:#e3e7ea;
  --primary:#00695c;
  --shadow:0 6px 20px rgba(0,0,0,.08);
}

/* ===== Toolbar / Leyenda ===== */
.asig .toolbar{
  display:flex;align-items:center;justify-content:space-between;margin:10px 0 12px
}
.asig .toolbar .left{display:flex;gap:8px;align-items:center}
.asig #anio.browser-default{
  display:inline-block;min-width:140px;padding:6px 10px;border:1px solid var(--border);
  border-radius:8px;background:#fff;line-height:1.2;color:var(--txt)
}
.asig .toolbar .left label[for="anio"]{margin-right:6px;color:var(--txt-soft);font-weight:400}
.asig .legend{display:flex;gap:12px;align-items:center;color:var(--txt-soft);font-size:.85rem}
.asig .bullet{width:10px;height:10px;border-radius:3px;display:inline-block}
.asig .b-req{background:var(--bar-req)}
.asig .b-asg{background:var(--bar-asg)}
.asig .b-proc{background:var(--bar-proc)}

/* ===== Layout / Grid ===== */
.asig .wrap{width:100%;max-width:none;margin:0;padding:0 10px}
.asig #cards{width:100% !important;display:block}
html,body{overflow-x:hidden}

/* Tarjetas fluidas: no se “cortan” (Agosto) */
.asig .grid{
  width:100%;
  display:grid;
  grid-template-columns: repeat(auto-fit, minmax(220px, 1fr));
  gap:14px;
  align-items:start;
}

/* ===== Tarjeta base ===== */
.asig .card{
  background:#fff;border:none;border-radius:12px;box-shadow:none;padding:0;cursor:pointer;position:relative
}
.asig .card.lock{opacity:.45;pointer-events:none}

/* ===== Tarjeta de mes ===== */
.asig .card--mock{
  padding:10px;
  border:1px solid var(--mock-border);
  border-radius:12px;
  background:#fff;
  transition:.2s ease box-shadow, .2s ease transform;
}
.asig .card--mock:hover{box-shadow:0 3px 12px rgba(0,0,0,.10);transform:translateY(-1px)}

/* Pastilla MES (gradiente por % asignado) */
.asig .card--mock .month-pill{
  position:relative;
  color:#fff;
  border-radius:8px;
  text-align:center;
  padding:5px 8px;
  font-size:.72rem;
  margin-bottom:8px;
  letter-spacing:.2px;
  font-weight:400;                 /* sin negritas */
  background: linear-gradient(
    90deg,
    var(--ok) 0 calc(var(--asg,0)*1%),
    var(--danger) calc(var(--asg,0)*1%) 100%
  );
}
.asig .card--mock.full .month-pill{ background:var(--ok) !important; }
.asig .card--mock.zero .month-pill{ background:var(--muted-pill) !important; }

/* Contenido principal de la tarjeta */
.asig .card--mock .tons-title{
  text-align:center;
  font-weight:400;
  font-size:.70rem;
  color:#666;
  margin:0 0 2px;
}
.asig .card--mock .tons-value{
  text-align:center;
  font-weight:400;                 /* sin negritas */
  font-size:1.05rem;
  line-height:1.1;
  margin:2px 0 4px;
  color:#222;
}

/* ===== Stats compactas (números, no barras) ===== */
.asig .stats{ margin-top:6px; }
.asig .stat{
  display:grid;
  grid-template-columns: 12px 28px auto 16px auto; /* dot | etiqueta corta | spacer | unidad | valor/pct */
  align-items:center;
  column-gap:6px;
  font-size:.78rem;
  color:#333;
  margin:3px 0;
  font-weight:400;
}
.asig .dot{ width:8px; height:8px; border-radius:2px; display:inline-block; }
.asig .dot-proc{ background: var(--bar-proc); }
.asig .dot-asg{ background: var(--bar-asg); }
.asig .stat .label{ color:#555; font-weight:400; }
.asig .stat .unit{ color:#666; }
.asig .stat .val{ color:#222; }

/* “Faltan” */
.asig .stat-missing{
  grid-template-columns: auto auto;
  color:#c62828;
  font-weight:400;
}

/* ===== Tarjeta CONSOLIDADO ===== */
.asig .card--summary{
  background: linear-gradient(180deg,#ffffff 0%, #f6fff7 100%);
  border:2px solid var(--mock-border);  /* más marcada la forma */
  border-radius:12px;
  padding:10px;
}
.asig .card--summary .month-pill{
  background:#e8f7ea;
  border:1px solid var(--mock-border);
  color:#1b5e20;
  border-radius:8px;
  padding:5px 8px;
  text-align:center;
  font-weight:400;                 /* sin negritas */
  font-size:.74rem;
  margin-bottom:8px;
}
.asig .card--summary .tons-title{
  text-align:center; font-size:.72rem; color:#205a22; font-weight:400; margin:2px 0;
}
.asig .card--summary .tons-value{
  text-align:center; font-weight:400; font-size:1.12rem; margin:2px 0 6px; color:#0d3b19;
}

/* ===== Panel Chart ===== */
.asig .panel-chart{
  margin-top:16px;padding:10px;border:1px solid var(--border);border-radius:10px;background:var(--bg-soft);box-shadow:var(--shadow)
}
.asig .panel-chart h3{margin:4px 6px 8px;font-size:.9rem;color:var(--primary);font-weight:400}

/* ===== Drawer (proveedores) ===== */
.drawer{
  position:fixed;top:78px;right:14px;width:420px;max-width:92vw;background:#fff;
  border:1px solid var(--border);border-radius:12px;box-shadow:var(--shadow);display:none;z-index:10400
}
.drawer header{display:flex;justify-content:space-between;align-items:center;padding:10px 12px;border-bottom:1px solid var(--border);color:var(--primary);font-size:.95rem;font-weight:400}
.drawer .x{background:#fff;border:1px solid var(--border);border-radius:8px;padding:2px 8px;cursor:pointer}
.drawer .x:hover{filter:brightness(.96)}
.drawer .body{max-height:58vh;overflow:auto;padding:8px 12px}
.drawer table{width:100%;border-collapse:collapse;font-size:.9rem}
.drawer th,.drawer td{padding:8px;border-bottom:1px solid #eef1f3;text-align:left}
.drawer th{color:#0f1e1d;font-size:.86rem;font-weight:600;background:#f7faf9}

/* ===== Máscaras / Modales base ===== */
.asig-mask{position:fixed;inset:0;background:rgba(0,0,0,.45);display:none;z-index:10500}
.asig-modal{
  position:fixed;left:0;right:0;top:6vh;margin:0 auto;width:92%;max-width:760px;max-height:88vh;background:#fff;
  border:1px solid var(--border);border-radius:12px;box-shadow:0 18px 60px rgba(0,0,0,.25);display:none;z-index:10600;overflow:hidden
}
.asig-modal--sm{max-width:560px}
.asig-modal header{padding:10px 14px;border-bottom:1px solid var(--border);color:var(--primary);font-weight:400}
.asig-modal .content{padding:12px 14px;max-height:calc(88vh - 110px);overflow:auto}
.asig-modal .actions{display:flex;gap:8px;justify-content:flex-end;padding:8px 14px;border-top:1px solid var(--border);background:#fff;position:sticky;bottom:0}

/* ===== Prompt contraseña (centrado) ===== */
.asig-pass{
  position:fixed; inset:0; display:none; z-index:10660;
  align-items:center; justify-content:center; /* JS -> display:flex */
}
.asig-pass .backdrop{ position:absolute; inset:0; background:rgba(0,0,0,.25); }
.asig-pass .sheet{
  position:relative; width:90%; max-width:360px; background:#fff; border:1px solid var(--border);
  border-radius:12px; box-shadow:0 18px 60px rgba(0,0,0,.25); padding:12px 14px; z-index:1;
}
.asig-pass h4{ margin:0 0 8px; color:var(--primary); font-weight:400 }

/* ===== Popover proveedores ===== */
.asig-pop{
  position:absolute; z-index:10620; display:none;
  width:min(560px, 92vw);
  background:#fff; border:1px solid var(--border); border-radius:12px;
  box-shadow:0 16px 40px rgba(0,0,0,.22);
}
.asig-pop header{
  padding:10px 12px; border-bottom:1px solid var(--border);
  display:flex; align-items:center; justify-content:space-between;
  color:var(--primary); font-weight:400;
}
.asig-pop .x{ border:1px solid var(--border); background:#fff; border-radius:8px; padding:2px 8px; cursor:pointer; }
.asig-pop .x:hover{ filter:brightness(.96) }
.asig-pop .body{ max-height:54vh; overflow:auto; padding:8px 12px }
.asig-pop::after{
  content:""; position:absolute; top:-8px; left:24px;
  border-left:8px solid transparent; border-right:8px solid transparent;
  border-bottom:8px solid #fff; filter:drop-shadow(0 -1px 0 var(--border));
}
.asig-pop table{ width:100%; border-collapse:collapse }
.asig-pop th, .asig-pop td{ padding:8px; border-bottom:1px solid #eef1f3; text-align:left; font-weight:400 }
.asig-pop th{ background:#f7faf9; color:#0f1e1d; font-size:.86rem }

/* ===== Menú contextual ===== */
.asig-card-menu{
  position:absolute; z-index:10610; display:none;
  background:#fff; border:1px solid var(--border); border-radius:10px; box-shadow:0 16px 40px rgba(0,0,0,.22);
  padding:6px; min-width:220px;
}
.asig-card-menu button{
  width:100%; text-align:left; padding:10px 12px; margin:6px 0;
  border:1px solid var(--border); background:#fff; border-radius:8px; cursor:pointer; font-size:.9rem; font-weight:400;
}
.asig-card-menu button:hover{ background:#f6fbfa }

/* Opcional: bordes sutiles por estado */
.asig .card--mock.full{ box-shadow:0 0 0 2px rgba(46,125,50,.08); }
.asig .card--mock.need{ box-shadow:0 0 0 2px rgba(239,83,80,.08); }
