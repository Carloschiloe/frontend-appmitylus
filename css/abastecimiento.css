/* =========================================
   ABASTECIMIENTO – Overrides sobre global
   ========================================= */

/* ===== TABLAS: Contactos + Visitas ===== */

/* Cabezal teal */
#tablaContactos.dataTable thead th,
#tablaVisitas.dataTable thead th {
  background: var(--primary) !important;
  color: #fff !important;
}

/* Densidad de filas */
#tablaContactos th, #tablaContactos td,
#tablaVisitas  th, #tablaVisitas  td {
  font-size: .92rem;
  padding: .38rem .5rem;
  border-bottom: 1px solid #e0e0e0;
}

/* Íconos de acciones */
#tablaContactos td .material-icons,
#tablaVisitas  td .material-icons {
  font-size: 1.22em;
  margin-right: 8px;
  transition: transform .12s ease, color .12s ease;
}
#tablaContactos td .material-icons:hover,
#tablaVisitas  td .material-icons:hover {
  color: var(--primary-acc);
  transform: scale(1.08);
}

/* ===== CLICS EN TABLA DE VISITAS (reglas críticas) ===== */
#tablaVisitas a[data-action] {           /* el click entra al <a> */
  pointer-events: auto !important;
  cursor: pointer;
  display: inline-block;
}
#tablaVisitas i.material-icons {         /* el ícono NO intercepta */
  pointer-events: none !important;
}
#tab-visitas #tablaVisitas td:last-child { /* columna Acciones */
  white-space: nowrap;
  pointer-events: auto !important;
}

/* ===== BOTONES / TOOLBAR ===== */
#btnOpenContactoModal { margin: .25rem 0 .5rem; }

/* ===== MODALES ===== */
#modalContacto.modal,
#modalDetalleContacto.modal,
#modalVisita.modal,
#modalBloque.modal {
  max-width: 760px !important;
  max-height: 86vh !important;
  top: 7vh !important;
}
#modalContacto .modal-content,
#modalDetalleContacto .modal-content,
#modalVisita .modal-content,
#modalBloque .modal-content {
  max-height: 72vh !important;
}
#modalContacto .modal-footer,
#modalDetalleContacto .modal-footer,
#modalVisita .modal-footer,
#modalBloque .modal-footer {
  padding: .5rem .75rem !important;
}

/* Inputs más compactos en modales */
#modalContacto .input-field input,
#modalContacto .input-field select,
#modalContacto .input-field textarea,
#modalVisita   .input-field input,
#modalVisita   .input-field select,
#modalVisita   .input-field textarea {
  margin-bottom: .6rem;
}

/* Select nativo con look Materialize (sólo en modales) */
.modal .browser-default {
  width: 100%;
  background: transparent;
  border: none;
  border-bottom: 1px solid #9e9e9e;
  padding: 8px 0 6px;
  font-size: 16px;
}
.modal .browser-default:focus {
  outline: none;
  border-bottom: 2px solid #26a69a;
}
.modal .input-field label.active {
  transform: none !important;
  font-size: .9rem;
  color: #9e9e9e;
  margin-bottom: 2px;
  display: block;
}

/* Z-index alto por si DataTables/Charts crean contexts */
.modal         { z-index: 1005 !important; }
.modal-overlay { z-index: 1004 !important; }

/* Evita que contenedores tapen el overlay */
.container, .card-panel { overflow: visible !important; }

/* ===== RESPONSIVE ===== */
@media (max-width: 992px) {
  #tablaContactos, #tablaContactos_wrapper,
  #tablaVisitas,  #tablaVisitas_wrapper {
    min-width: 360px !important;
    width: 100vw !important;
    display: block !important;
  }
  .dataTables_paginate { justify-content: center; }
}
@media (max-width: 600px) {
  #modalContacto.modal,
  #modalDetalleContacto.modal,
  #modalVisita.modal {
    width: 96% !important;
    top: 4vh !important;
  }
  #tablaContactos th, #tablaContactos td,
  #tablaVisitas  th, #tablaVisitas  td {
    font-size: .88rem;
    padding: .34rem .45rem;
  }
}

/* ===== UTILIDADES ===== */
.mt-12{margin-top:12px} .mt-14{margin-top:14px} .mt-18{margin-top:18px}
.mb-32{margin-bottom:32px}
.hidden{display:none!important}
.static-label{transform:none!important;font-size:.9rem;color:#9e9e9e}

/* ===== PLANIFICACIÓN (sin duplicados) ===== */
.progress.slim{height:8px;border-radius:8px;margin:.4rem 0 0}
.progress .determinate{border-radius:8px}

.kpi-grid{display:grid;grid-template-columns:repeat(12,1fr);gap:14px;margin:14px 0 6px}
.kpi{grid-column:span 12;background:#fff;border-radius:14px;padding:16px 18px;box-shadow:0 6px 20px rgba(0,0,0,.06)}
.kpi h6{margin:0;font-size:.95rem;color:#546e7a;font-weight:600}
.kpi .val{font-size:1.6rem;font-weight:700;margin-top:4px;color:#004d40}
.kpi .sub{font-size:.9rem;color:#78909c;margin-top:2px}
@media (min-width:600px){.kpi{grid-column:span 6}}
@media (min-width:992px){.kpi{grid-column:span 3}}

.toolbar-panel{padding:14px 16px}
.toolbar{display:grid;grid-template-columns:repeat(12,1fr);gap:10px;align-items:end}
.toolbar .input-field{margin:0}
.toolbar .actions{grid-column:span 12;display:flex;gap:8px;justify-content:flex-end}
.toolbar .toggles{display:flex;gap:16px;align-items:center}
.periodo-wrap{display:flex;gap:10px;align-items:end}
.periodo-nav{display:flex;gap:6px;align-items:center}
.btn-ghost{background:transparent!important}
@media (min-width:600px){
  .toolbar .w2{grid-column:span 2}
  .toolbar .w3{grid-column:span 3}
  .toolbar .w4{grid-column:span 4}
  .toolbar .w5{grid-column:span 5}
  .toolbar .w6{grid-column:span 6}
  .toolbar .w12{grid-column:span 12}
}
@media (min-width:992px){
  .toolbar .w2{grid-column:span 2}
  .toolbar .w3{grid-column:span 3}
  .toolbar .w4{grid-column:span 4}
  .toolbar .w5{grid-column:span 5}
  .toolbar .w6{grid-column:span 6}
}

#tablaProgramaSemanal.dataTable thead th{
  background: var(--primary) !important;
  color: #fff !important;
}
#tablaProgramaSemanal td.right-align{ text-align:right }

.chart-card{background:#fff;border-radius:14px;padding:14px 16px;box-shadow:0 6px 20px rgba(0,0,0,.06)}
.chart-card .chart-title{margin:0 0 8px}

.rt-list{margin:0;list-style:none;display:grid;gap:8px}
.rt-list .progress{margin:.25rem 0 0}

.gantt{display:grid;gap:8px}
.gantt__row{display:grid;grid-template-columns:110px 1fr;align-items:center;gap:8px}
.gantt__label{font-size:.9rem;color:#607d8b}
.gantt__track{position:relative;height:20px;background:#eceff1;border-radius:10px;overflow:hidden}
.gantt__bar{position:absolute;top:0;bottom:0;border-radius:10px}
.gantt__bar--meta{left:0;right:0;border:2px dashed #90a4ae;background:transparent}
.gantt__bar--plan{left:0;width:0;background:#64b5f6}
.gantt__bar--real{left:0;width:0;background:#66bb6a;opacity:.9}

/* Impresión */
@media print{
  nav, .tabs, .actions, .modal, .toolbar-panel .input-field { display:none !important; }
  .kpi-grid { grid-template-columns:repeat(4,1fr) !important; }
  .chart-card { box-shadow:none !important; border:1px solid #eee; }
}

/* Márgenes de tablas */
.tabla-mt   { margin-top: .75rem; }
.tabla-mt-sm{ margin-top: .5rem; }

/* ===== VISITAS: layout de columnas ===== */
#tab-visitas #tablaVisitas { table-layout: fixed; width: 100%; }
#tab-visitas #tablaVisitas th,
#tab-visitas #tablaVisitas td { box-sizing: border-box; }

/* Fijas */
#tab-visitas #tablaVisitas th:nth-child(1), #tab-visitas #tablaVisitas td:nth-child(1) { width: 7rem; }   /* Fecha */
#tab-visitas #tablaVisitas th:nth-child(3), #tab-visitas #tablaVisitas td:nth-child(3) { width: 8rem; }   /* Centro */
#tab-visitas #tablaVisitas th:nth-child(4), #tab-visitas #tablaVisitas td:nth-child(4) { width: 7rem; }   /* Muestra */
#tab-visitas #tablaVisitas th:nth-child(6), #tab-visitas #tablaVisitas td:nth-child(6) { width: 6rem; text-align:right; } /* Tons */
#tab-visitas #tablaVisitas th:nth-child(8), #tab-visitas #tablaVisitas td:nth-child(8) { width: 8rem; }    /* Acciones */

/* Flexibles */
#tab-visitas #tablaVisitas th:nth-child(2), #tab-visitas #tablaVisitas td:nth-child(2) { width: auto; }    /* Proveedor */
#tab-visitas #tablaVisitas th:nth-child(5), #tab-visitas #tablaVisitas td:nth-child(5) { width: 14rem; }   /* Próximo paso */
#tab-visitas #tablaVisitas th:nth-child(7), #tab-visitas #tablaVisitas td:nth-child(7) { width: auto; }    /* Observaciones */

/* Ellipsis */
.ellipsisCell { display:inline-block; white-space:nowrap; overflow:hidden; text-overflow:ellipsis; vertical-align:middle; }
.ellipsisProv { max-width: 26ch; }
.ellipsisObs  { display:block; width:100%; }

/* ===== Fotos de visitas ===== */
@import url('/js/abastecimiento/visitas/fotos/styles.css');

/* Wrapper del botón + input “transparente” */
.filepick-wrap {
  position: relative;
  display: inline-flex;
  align-items: center;
  gap: 8px;
}

/* El input ocupa el área del botón y recibe el tap directamente */
.filepick-input {
  position: absolute;
  inset: 0 auto auto 0; /* top:0; left:0 */
  width: 100%;
  height: 100%;
  opacity: 0;           /* invisible pero clickeable */
  cursor: pointer;
  z-index: 2;
}

/* El botón queda debajo */
#btnPickFotos { position: relative; z-index: 1; }

/* Asegura que nada mate el tap dentro del modal */
#modalVisita,
#modalVisita * { pointer-events: auto; }
